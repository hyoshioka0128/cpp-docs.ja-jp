---
description: '詳細情報: C6279'
title: C6279
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- C6279
helpviewer_keywords:
- C6279
ms.assetid: 0af88b58-35df-456f-8c02-e8eeffe3b7de
ms.openlocfilehash: 62a9edc09012e2d772a58049e0281cf31f6423e1
ms.sourcegitcommit: d6af41e42699628c3e2e6063ec7b03931a49a098
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/11/2020
ms.locfileid: "97221437"
---
# <a name="c6279"></a>C6279

> 警告 C6279: \<variable> スカラー new を使用して割り当てられています。 array delete [] を使用して削除されました

この警告は、C++ コードでのみ表示され、呼び出し元の関数がスカラー演算子を使用したメモリ割り当ての一貫性がないことを示してい **`new`** ますが、array **delete []** 演算子を使用して解放されています。 メモリがスカラーで割り当てられている場合は、 **`new`** 通常、スカラーを使用して解放する必要があり **`delete`** ます。

これによって問題が生じる原因は、少なくとも 3 つあります。

- 配列内の個別のオブジェクトのコンストラクターは呼び出されませんが、デストラクターは呼び出されます。

- グローバル (またはクラス固有の) **operator new** と **operator delete** が **operator new []** および operator **delete []** と互換性がない場合、予期しない結果が発生する可能性があります。

この問題による影響を正確に予測することは困難です。 初期化されていないメモリを使用すると、コンストラクターが呼び出されないために、ランダムな動作やクラッシュが発生する可能性があります。 また、演算子がオーバーライドされた場合にメモリの割り当てやクラッシュが発生する可能性があります。 まれに、不一致が重要な問題とならない場合もあります。 分析ツールでは、現在、これらの状況は区別されません。

## <a name="example"></a>例

この警告が発生するコード例を次に示します。

```cpp
class A
{
  // members
};

void f ( )
{
  A *pA = new A;
  //code ...
  delete[] pA;
}
```

この警告を解決するには、次のコードを使用します。

```cpp
void f( )
{
  A *pA = new A;
  //code ...
  delete pA;
}
```

これらの割り当ての問題を完全に回避するには、C++ の標準テンプレート ライブラリ (STL) によって提供される機構を使用します。 これには、 [shared_ptr](../standard-library/shared-ptr-class.md)、 [unique_ptr](../standard-library/unique-ptr-class.md)、および [ベクター](../standard-library/vector.md)が含まれます。 詳細については、「 [スマートポインター](../cpp/smart-pointers-modern-cpp.md) 」と「 [C++ 標準ライブラリ](../standard-library/cpp-standard-library-reference.md)」を参照してください。

## <a name="see-also"></a>関連項目

- [C6014](../code-quality/c6014.md)
